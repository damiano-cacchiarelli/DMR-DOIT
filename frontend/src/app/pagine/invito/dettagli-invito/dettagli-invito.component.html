<app-menu></app-menu>

<div *ngIf="invito" class="container-fluid px-4 mt-5">
    <table class="table mt-2">
        <tbody>
            <tr>
                <td class="col-1 container text-center">
                    <div class="row">
                        <div class="col">
                            <button class="btn btn-sm btn-outline-danger m-1" (click)="onElimina(invito.id)"><i
                                    class="far fa-trash-alt"></i> Elimina</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <button class="btn btn-sm btn-outline-primary m-1" routerLink="/bacheca"><i
                                    class="fas fa-arrow-left"></i> Indietro</button>
                        </div>
                    </div>
                </td>
                <td class="col-8">
                    <div class="container-fluid mr-2">
                        <div class="row justify-content-between">
                            <div class="col-md-6">
                                <h3 class="mb-1">Progetto: {{invito.nomeProgetto}}</h3>
                            </div>
                            <div class="col-md-6  text-end">
                                <small>{{invito.data | date:'dd/MM/yyyy hh:mm'}} </small><span class="fst-italic fw-bold">da
                                    {{invito.idMittente}}</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="d-flex justify-content-between">
                                <span class="fst-italic fw-bold">a {{invito.idDestinatario}}</span>
                                <span class="badge bg-info">{{invito.tipologiaRisposta}}</span>
                            </div>
                        </div>
                        <div class="row my-3">
                            <p>{{invito.contenuto}}</p>
                        </div>
                        <div class="row">
                            <small class="fw-bold">{{invito.tipologiaInvito}}</small>
                        </div>

                        <div class="row text-center">
                            <div class="col" *ngIf="invito.tipologiaRisposta == TipologiaRisposta.IN_ATTESA">
                                <button class="btn btn-sm btn-outline-success m-1" (click)="onAccetta(invito.id)"
                                    *ngIf="invito.soggetto != RuoloSoggetto.MITTENTE && invito.tipologiaInvito != TipologiaInvito.VALUTAZIONE"><i
                                        class="far fa-check-square"></i> Accetta</button>
                                <button
                                    *ngIf="invito.soggetto != RuoloSoggetto.MITTENTE && invito.tipologiaInvito == TipologiaInvito.VALUTAZIONE && hasRuolo('ROLE_ESPERTO')"
                                    class="btn btn-sm btn-outline-primary m-1"
                                    routerLink="/esperto/valuta/{{invito.idProgetto}}/{{invito.id}}"><i
                                        class="far fa-question-circle"></i> Valuta</button>
                                <button *ngIf="invito.soggetto != RuoloSoggetto.MITTENTE && invito.tipologiaRisposta == TipologiaRisposta.IN_ATTESA"
                                    class="btn btn-sm btn-outline-warning m-1" (click)="onRifiuta(invito.id)">
                                    <i class="far fa-window-close"></i> Rifiuta</button>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>